#
# CDDL HEADER START
#
# The contents of this file are subject to the terms of the
# Common Development and Distribution License (the "License").
# You may not use this file except in compliance with the License.
#
# You can obtain a copy of the license at usr/src/OPENSOLARIS.LICENSE
# or http://www.opensolaris.org/os/licensing.
# See the License for the specific language governing permissions
# and limitations under the License.
#
# When distributing Covered Code, include this CDDL HEADER in each
# file and include the License file at usr/src/OPENSOLARIS.LICENSE.
# If applicable, add the following below this CDDL HEADER, with the
# fields enclosed by brackets "[]" replaced with your own identifying
# information: Portions Copyright [yyyy] [name of copyright owner]
#
# CDDL HEADER END
#

#
# Copyright (c) 2017, 2021, Oracle and/or its affiliates.
#

BUILD_BITS=             NO_ARCH
include ../../../make-rules/shared-macros.mk

COMPONENT_NAME=		sil
COMPONENT_VERSION=	0.1

# due to 27244651 the IPS version should be the solaris version
IPS_COMPONENT_VERSION=	$(PKG_SOLARIS_VERSION)

COMPONENT_PROJECT_URL=	http://scripts.sil.org


COMPONENT_SRC=		ttf-sil-abyssinica-1.0
COMPONENT_ARCHIVE=	ttf-sil-abyssinica_1.0.orig.tar.bz2
COMPONENT_ARCHIVE_URL=	http://archive.debian.org/debian/pool/main/t/ttf-sil-abyssinica/$(COMPONENT_ARCHIVE)
COMPONENT_ARCHIVE_HASH=	sha256:8cdcdc58f9cef10350ff9abc6bccf87141aac2ae75d0e01c46317a82c4249a98

COMPONENT_SRC_1=	ttf-sil-andika-1.0.basic
COMPONENT_ARCHIVE_1=	ttf-sil-andika_1.0.basic.orig.tar.gz
COMPONENT_ARCHIVE_URL_1=http://archive.debian.org/debian/pool/main/t/ttf-sil-andika/$(COMPONENT_ARCHIVE_1)
COMPONENT_ARCHIVE_HASH_1=sha256:01293f141eebda107e0a6828d6e0bcac08c4eedb2d7d80de892056191618244a

COMPONENT_SRC_2=	ttf-sil-charis-4.106
COMPONENT_ARCHIVE_2=	ttf-sil-charis_4.106.orig.tar.bz2
COMPONENT_ARCHIVE_URL_2=http://archive.debian.org/debian/pool/main/t/ttf-sil-charis/$(COMPONENT_ARCHIVE_2)
COMPONENT_ARCHIVE_HASH_2=sha256:f173c1a1a7796e6952ad1211828d840d6c0b6268adc05e4f60be895ddea07af2

COMPONENT_SRC_3=	ttf-sil-dai-banna-2.1
COMPONENT_ARCHIVE_3=	ttf-sil-dai-banna_2.1.orig.tar.bz2
COMPONENT_ARCHIVE_URL_3=http://archive.debian.org/debian/pool/main/t/ttf-sil-dai-banna/$(COMPONENT_ARCHIVE_3)
COMPONENT_ARCHIVE_HASH_3=sha256:4c6fcf959e146396ef3b7d484c9a3db432c94d827a74607c6a199f9a80fac05d

COMPONENT_SRC_4=	ttf-sil-doulos-4.106
COMPONENT_ARCHIVE_4=	ttf-sil-doulos_4.106.orig.tar.bz2
COMPONENT_ARCHIVE_URL_4=http://archive.debian.org/debian/pool/main/t/ttf-sil-doulos/$(COMPONENT_ARCHIVE_4)
COMPONENT_ARCHIVE_HASH_4=sha256:219c3e339a39de39d1d3cf3551d13450912e74c3dac8ebee6b0dc6f917ebbe4a

COMPONENT_SRC_5=	ttf-sil-ezra-2.51
COMPONENT_ARCHIVE_5=	ttf-sil-ezra_2.51.orig.tar.gz
COMPONENT_ARCHIVE_URL_5=http://archive.debian.org/debian/pool/main/t/ttf-sil-ezra/$(COMPONENT_ARCHIVE_5)
COMPONENT_ARCHIVE_HASH_5=sha256:dd397d02e2b957e3a44a9a1d9e0982ec94433c097483363779a27b711e529a1e

COMPONENT_SRC_6=	ttf-sil-galatia-2.1
COMPONENT_ARCHIVE_6=	ttf-sil-galatia_2.1.orig.tar.gz
COMPONENT_ARCHIVE_URL_6=http://archive.debian.org/debian/pool/main/t/ttf-sil-galatia/$(COMPONENT_ARCHIVE_6)
COMPONENT_ARCHIVE_HASH_6=sha256:80df2b778195dc5b38ef6e98518960428077df7b8083544843bd57018c9f4f8b

COMPONENT_SRC_7=	ttf-sil-scheherazade-1.001
COMPONENT_ARCHIVE_7=	ttf-sil-scheherazade_1.001.orig.tar.gz
COMPONENT_ARCHIVE_URL_7=http://archive.debian.org/debian/pool/main/t/ttf-sil-scheherazade/$(COMPONENT_ARCHIVE_7)
COMPONENT_ARCHIVE_HASH_7=sha256:c0c50ce2c9af14d07e825c72cca2d5dd6bbe5dce3c952219cc89869571710845

COMPONENT_SRC_8=	ttf-sil-sophia-nubian-1.000
COMPONENT_ARCHIVE_8=	ttf-sil-sophia-nubian_1.000.orig.tar.gz
COMPONENT_ARCHIVE_URL_8=http://archive.debian.org/debian/pool/main/t/ttf-sil-sophia-nubian/$(COMPONENT_ARCHIVE_8)
COMPONENT_ARCHIVE_HASH_8=sha256:827d6a66dfce15854c59a355f6299df089fadf935f48177fdac91212e44ebe4a

COMPONENT_SRC_9=	ttf-sil-yi-1.200
COMPONENT_ARCHIVE_9=	ttf-sil-yi_1.200.orig.tar.gz
COMPONENT_ARCHIVE_URL_9=http://archive.debian.org/debian/pool/main/t/ttf-sil-yi/$(COMPONENT_ARCHIVE_9)
COMPONENT_ARCHIVE_HASH_9=sha256:5d8635f903cd28ba41ad9698f60e84869cb6eea30c84bafc94fec2ab41a41177

COMPONENT_SRC_10=	SILApparatus
COMPONENT_ARCHIVE_10=	SILApparatus1.0.zip
COMPONENT_ARCHIVE_URL_10=http://scripts.sil.org/cms/scripts/render_download.php?format=file&media_id=SILApparatus1.0.zip&filename=SILApparatus1.0.zip
COMPONENT_ARCHIVE_HASH_10=sha256:3355b8081e0f4d5e75675c2bb5eceb2468b63e45bf6d0558d2a2a2ab70854691

COMPONENT_SRC_11=	LateefRegOT
COMPONENT_ARCHIVE_11=	LateefRegOT_1.001.zip
COMPONENT_ARCHIVE_URL_11=https://software.sil.org/downloads/r/lateef/LateefRegOT_1.001.zip
COMPONENT_ARCHIVE_HASH_11=sha256:ca3f84555007975d69c18f3d958f6a1a1c79c5b550c13d168d600e07efac1c09
UNPACK_ARGS_11=		-r $(COMPONENT_SRC_11)

PKG_VARS+=     COMPONENT_ARCHIVE_URL_1
PKG_VARS+=     COMPONENT_ARCHIVE_URL_2
PKG_VARS+=     COMPONENT_ARCHIVE_URL_3
PKG_VARS+=     COMPONENT_ARCHIVE_URL_4
PKG_VARS+=     COMPONENT_ARCHIVE_URL_5
PKG_VARS+=     COMPONENT_ARCHIVE_URL_6
PKG_VARS+=     COMPONENT_ARCHIVE_URL_7
PKG_VARS+=     COMPONENT_ARCHIVE_URL_8
PKG_VARS+=     COMPONENT_ARCHIVE_URL_9
PKG_VARS+=     COMPONENT_ARCHIVE_URL_10
PKG_VARS+=     COMPONENT_ARCHIVE_URL_11


COMPONENT_BUGDB=	g11n/font

COMPONENT_BAID=		10474

BUILD_STYLE=		justmake
TEST_TARGET=		$(NO_TESTS)

include $(WS_MAKE_RULES)/common.mk

PROTOFONTSDIR=	$(PROTOUSRSHAREDIR)/fonts/TrueType

COMPONENT_BUILD_ACTION = \
	$(CP) $(foreach n, 1 2 3 4 5 6 7 8 9 11,$(COMPONENT_SRC_$n)/*.ttf) $(@D)/; \
	$(CP) $(COMPONENT_SRC_10)/*.TTF $(@D)/; \
	for fn in $(@D)/*.TTF; do $(MV) $$fn $${fn/.TTF/.ttf}; done; \
	$(MKFONTSCALE) $(@D); \
	$(MKFONTDIR) $(@D);

COMPONENT_INSTALL_ACTION = \
	$(CP) $(COMPONENT_SRC)/OFL.txt $(COMPONENT_SRC)/OFL-FAQ.txt $(PROTOUSRSHAREDOCDIR)/ttf-$(COMPONENT_NAME)/; \
	$(CP) $(COMPONENT_SRC)/FONTLOG.txt $(PROTOUSRSHAREDOCDIR)/ttf-$(COMPONENT_NAME)/FONTLOG.Abyssinica.txt; \
	$(CP) $(COMPONENT_SRC_1)/FONTLOG.txt $(PROTOUSRSHAREDOCDIR)/ttf-$(COMPONENT_NAME)/FONTLOG.Andika.txt; \
	$(CP) $(COMPONENT_SRC_2)/FONTLOG.txt $(PROTOUSRSHAREDOCDIR)/ttf-$(COMPONENT_NAME)/FONTLOG.Charis.txt; \
	$(CP) $(COMPONENT_SRC_3)/FONTLOG.txt $(PROTOUSRSHAREDOCDIR)/ttf-$(COMPONENT_NAME)/FONTLOG.Dai-Banna.txt; \
	$(CP) $(COMPONENT_SRC_4)/FONTLOG.txt $(PROTOUSRSHAREDOCDIR)/ttf-$(COMPONENT_NAME)/FONTLOG.Doulos.txt; \
	$(CP) $(COMPONENT_SRC_5)/FONTLOG.txt $(PROTOUSRSHAREDOCDIR)/ttf-$(COMPONENT_NAME)/FONTLOG.Ezra.txt; \
	$(CP) $(COMPONENT_SRC_6)/FONTLOG.txt $(PROTOUSRSHAREDOCDIR)/ttf-$(COMPONENT_NAME)/FONTLOG.Galatia.txt; \
	$(CP) $(COMPONENT_SRC_7)/FONTLOG.txt $(PROTOUSRSHAREDOCDIR)/ttf-$(COMPONENT_NAME)/FONTLOG.Scheherazade.txt; \
	$(CP) $(COMPONENT_SRC_8)/FONTLOG.txt $(PROTOUSRSHAREDOCDIR)/ttf-$(COMPONENT_NAME)/FONTLOG.Sophia-Nubian.txt; \
	$(CP) $(COMPONENT_SRC_9)/FONTLOG.txt $(PROTOUSRSHAREDOCDIR)/ttf-$(COMPONENT_NAME)/FONTLOG.Yi.txt; \
	$(CP) $(COMPONENT_SRC_11)/FONTLOG.txt $(PROTOUSRSHAREDOCDIR)/ttf-$(COMPONENT_NAME)/FONTLOG.Lateef.txt; \
	$(CP) $(COMPONENT_SRC)/README.txt $(PROTOUSRSHAREDOCDIR)/ttf-$(COMPONENT_NAME)/README.Abyssinica.txt; \
	$(CP) $(COMPONENT_SRC_1)/README.txt $(PROTOUSRSHAREDOCDIR)/ttf-$(COMPONENT_NAME)/README.Andika.txt; \
	$(CP) $(COMPONENT_SRC_2)/README.txt $(PROTOUSRSHAREDOCDIR)/ttf-$(COMPONENT_NAME)/README.Charis.txt; \
	$(CP) $(COMPONENT_SRC_3)/README.txt $(PROTOUSRSHAREDOCDIR)/ttf-$(COMPONENT_NAME)/README.Dai-Banna.txt; \
	$(CP) $(COMPONENT_SRC_4)/README.txt $(PROTOUSRSHAREDOCDIR)/ttf-$(COMPONENT_NAME)/README.Doulos.txt; \
	$(CP) $(COMPONENT_SRC_5)/README.txt $(PROTOUSRSHAREDOCDIR)/ttf-$(COMPONENT_NAME)/README.Ezra.txt; \
	$(CP) $(COMPONENT_SRC_8)/Readme.txt $(PROTOUSRSHAREDOCDIR)/ttf-$(COMPONENT_NAME)/README.Sophia-Nubian.txt; \
	$(CP) $(COMPONENT_SRC_10)/README.TXT $(PROTOUSRSHAREDOCDIR)/ttf-$(COMPONENT_NAME)/README.Apparatus.txt; \
	$(CP) $(@D)/*.ttf $(@D)/fonts.dir $(@D)/fonts.scale $(PROTOFONTSDIR)/$(COMPONENT_NAME);

COMPONENT_PRE_INSTALL_ACTION += \
	$(MKDIR) $(PROTOUSRSHAREDOCDIR)/ttf-$(COMPONENT_NAME); \
	$(MKDIR) $(PROTOFONTSDIR)/$(COMPONENT_NAME)/;

REQUIRED_PACKAGES += x11/font-utilities
